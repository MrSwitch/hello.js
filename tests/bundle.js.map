{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/process/browser.js","src/hello.js","tests/lib/errorResponse.js","tests/specs/e2e/modules.js","tests/specs/index.js","tests/specs/unit/core/hello.api.js","tests/specs/unit/core/hello.events.js","tests/specs/unit/core/hello.getAuthResponse.js","tests/specs/unit/core/hello.init.js","tests/specs/unit/core/hello.login.js","tests/specs/unit/core/hello.logout.js","tests/specs/unit/core/hello.use.js","tests/specs/unit/core/session.monitor.js","tests/specs/unit/ext/chromeapp/popup.js","tests/specs/unit/modules/api.js","tests/specs/unit/modules/apiMe.js","tests/specs/unit/modules/apiMeAlbum.js","tests/specs/unit/modules/apiMeAlbums.js","tests/specs/unit/modules/apiMeFriends.js","tests/specs/unit/modules/apiMePhotos.js","tests/specs/unit/modules/helper.js","tests/specs/unit/modules/index.js","../tricks/helper/store.js","../tricks/object/extend.js","../tricks/object/instanceOf.js"],"names":[],"mappings":"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","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nlet extend = require('tricks/object/extend');\nlet store = require('tricks/helper/store')\n\nlet hello = function(name) {\n\treturn hello.use(name);\n};\n\nmodule.exports = hello;\n\nextend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: (typeof location !== 'undefined' ? location.href.split('#')[0] : null),\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: (typeof location !== 'undefined' ? location.href : null)\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\textend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\textend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nextend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (...args) => {\n\t\t// If this is setting a value\n\t\tstore.apply(null, args);\n\t},\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = state.oauth_proxy + '?' + _this.param(p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\textend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tparent[p.callback](res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tparent[cb](str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\textend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\textend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nextend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\textend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\textend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n","define(function() {\n\n\treturn function(eventCode, done) {\n\t\treturn function(data, type) {\n\n\t\t\texpect(data).to.be.a('object');\n\t\t\texpect(data).to.have.property('error');\n\t\t\texpect(data.error).to.have.property('code');\n\t\t\texpect(data.error).to.have.property('message');\n\t\t\texpect(data.error.code).to.not.be.an('object');\n\t\t\texpect(data.error.message).to.not.be.an('object');\n\n\t\t\tif (eventCode)\n\t\t\t\texpect(data.error.code).to.be(eventCode);\n\n\t\t\tdone();\n\t\t};\n\t};\n\n});\n","define([\n\t'../libs/errorResponse',\n\t'../../../src/modules/box',\n\t'../../../src/modules/facebook',\n\t'../../../src/modules/flickr',\n\t'../../../src/modules/google',\n\t'../../../src/modules/windows',\n\t'../../../src/modules/dropbox',\n\t'../../../src/modules/twitter',\n\t'../../../src/modules/yahoo',\n\t'../../../src/modules/instagram',\n\t'../../../src/modules/joinme',\n\t'../../../src/modules/linkedin',\n\t'../../../src/modules/foursquare',\n\t'../../../src/modules/github',\n\t'../../../src/modules/bikeindex',\n\t'../../../src/modules/soundcloud',\n\t'../../../src/modules/vk'\n], function(\n\terrorResponse\n) {\n\n\tdescribe('E2E modules', function() {\n\n\t\t// Loop through all services\n\t\tfor (var name in hello.services) {\n\t\t\tsetupModuleTests(hello.services[name], name);\n\t\t}\n\n\t\tfunction setupModuleTests(module, name) {\n\n\t\t\tdescribe(name, function() {\n\n\t\t\t\tvar MATCH_URL = /^https?\\:\\/\\//;\n\n\t\t\t\tit('should contain oauth.auth path', function() {\n\t\t\t\t\tvar path = module.oauth.auth;\n\t\t\t\t\texpect(path).to.match(/^https?\\:\\/\\//);\n\t\t\t\t});\n\n\t\t\t\tit('should specify a base url', function() {\n\t\t\t\t\t// Loop through all services\n\t\t\t\t\texpect(module.base).to.match(/^https?\\:\\/\\//);\n\t\t\t\t});\n\n\t\t\t\tit('should be using OAuth1 contain, auth, request, token properties', function() {\n\n\t\t\t\t\t// Loop through all services\n\t\t\t\t\tvar oauth = module.oauth;\n\t\t\t\t\tif (oauth && parseInt(oauth.version, 10) === 1) {\n\t\t\t\t\t\texpect(oauth.auth).to.match(MATCH_URL);\n\t\t\t\t\t\texpect(oauth.token).to.match(MATCH_URL);\n\t\t\t\t\t\texpect(oauth.request).to.match(MATCH_URL);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\txit('should return error object when an api request is made with an unverified user', function(done) {\n\n\t\t\t\t\tvar i = 0;\n\n\t\t\t\t\tthis.timeout(60000);\n\n\t\t\t\t\tvar cb = errorResponse(null, function() {\n\t\t\t\t\t\tif (++i === 2)\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\n\t\t\t\t\t// Ensure user is signed out\n\t\t\t\t\thello.logout(name);\n\n\t\t\t\t\t// Make a request that returns an error object\n\t\t\t\t\thello(name)\n\t\t\t\t\t.api('me', cb)\n\t\t\t\t\t.then(null, cb);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n});\n","require('./e2e/modules.js');\nrequire('./index.js');\nrequire('./unit/core/hello.api.js');\nrequire('./unit/core/hello.events.js');\nrequire('./unit/core/hello.getAuthResponse.js');\nrequire('./unit/core/hello.init.js');\nrequire('./unit/core/hello.login.js');\nrequire('./unit/core/hello.logout.js');\nrequire('./unit/core/hello.use.js');\nrequire('./unit/core/session.monitor.js');\nrequire('./unit/ext/chromeapp/popup.js');\nrequire('./unit/modules/api.js');\nrequire('./unit/modules/apiMe.js');\nrequire('./unit/modules/apiMeAlbum.js');\nrequire('./unit/modules/apiMeAlbums.js');\nrequire('./unit/modules/apiMeFriends.js');\nrequire('./unit/modules/apiMePhotos.js');\nrequire('./unit/modules/helper.js');\nrequire('./unit/modules/index.js');","let hello = require('../../../../src/hello.js');\nlet errorResponse = require('../../../lib/errorResponse.js');\n\n\tdescribe('hello.api', function() {\n\n\t\tvar _request = hello.utils.request;\n\t\tvar _store = hello.utils.store;\n\t\tvar _session = {\n\t\t\taccess_token: 'token'\n\t\t};\n\t\tvar testable = {};\n\n\t\tbefore(function() {\n\n\t\t\t// Unset\n\t\t\t_request = hello.utils.request;\n\t\t\t_store = hello.utils.store;\n\n\t\t\t// Mock request\n\t\t\thello.utils.request = function(req, callback) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tcallback(req);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\thello.utils.store = function(label, body) {\n\t\t\t\treturn _session;\n\t\t\t};\n\n\t\t\t// Define default network\n\t\t\thello.init({\n\t\t\t\ttestable: {\n\t\t\t\t\toauth: {\n\t\t\t\t\t\tauth: 'https://testdemo/access',\n\t\t\t\t\t\tversion: 2\n\t\t\t\t\t},\n\n\t\t\t\t\tscope: {\n\t\t\t\t\t\tbasic: 'basic_scope'\n\t\t\t\t\t},\n\n\t\t\t\t\tbase: 'https://testable/'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttestable = hello.services.testable;\n\n\t\t});\n\n\t\tafter(function() {\n\n\t\t\t// Renew\n\t\t\thello.utils.request = _request;\n\n\t\t});\n\n\t\tit('should assign a complete event', function(done) {\n\t\t\thello('test')\n\t\t\t.api('/', function() {done();});\n\t\t});\n\n\t\tit('should throw a completed event if network name is undefined', function(done) {\n\t\t\thello('test')\n\t\t\t.api('/', errorResponse('invalid_network', done));\n\t\t});\n\n\t\tit('should throw a error event if network name is undefined', function(done) {\n\t\t\thello('test')\n\t\t\t.api('/')\n\t\t\t.then(null, errorResponse('invalid_network', done));\n\t\t});\n\n\t\tit('should throw a error event if path name is undefined', function(done) {\n\t\t\thello('test')\n\t\t\t.api()\n\t\t\t.then(null, errorResponse('invalid_path', done));\n\t\t});\n\n\t\tit('should construct the url using the base and the pathname', function(done) {\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint', function(res) {\n\t\t\t\texpect(res.url).to.eql('https://testable/endpoint');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tit('should extract the parameters from the URL', function(done) {\n\n\t\t\tvar session = _session;\n\t\t\t_session = null;\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint?a=a&b=b', function(res) {\n\t\t\t\t_session = session;\n\t\t\t\texpect(res.url).to.eql('https://testable/endpoint');\n\t\t\t\texpect(res.query).to.eql({\n\t\t\t\t\ta: 'a',\n\t\t\t\t\tb: 'b'\n\t\t\t\t});\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tit('should attach query object to the req.query', function(done) {\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint', {a: 'a'}, function(res) {\n\n\t\t\t\texpect(res.query).to.have.property('a', 'a');\n\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tit('should attach authResponse object to the req.authResponse', function(done) {\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint', function(res) {\n\n\t\t\t\texpect(res.authResponse).to.eql(_session);\n\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tit('should attach data object to the req.query when `req.method = get`', function(done) {\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint', 'get', {a: 'a'}, function(res) {\n\n\t\t\t\texpect(res.query).to.have.property('a', 'a');\n\t\t\t\texpect(res.data).to.be.empty();\n\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tit('should attach post data object to the req.data', function(done) {\n\n\t\t\thello('testable')\n\t\t\t.api('/endpoint', 'post', {a: 'a'}, function(res) {\n\n\t\t\t\texpect(res.method).to.eql('post');\n\t\t\t\texpect(res.query).to.not.have.property('a');\n\t\t\t\texpect(res.data).to.have.property('a', 'a');\n\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tdescribe('POST', function() {\n\n\t\t\t// Not supported in IE9\n\t\t\tvar hasFormdata = typeof FormData === 'function';\n\n\t\t\tif (hasFormdata) {\n\t\t\t\tit('should accept FormData as the data object', function(done) {\n\n\t\t\t\t\tvar formData = new FormData();\n\t\t\t\t\tformData.append('user', 'name');\n\n\t\t\t\t\thello('testable')\n\t\t\t\t\t.api('/endpoint', 'POST', formData)\n\t\t\t\t\t.then(function(res) {\n\t\t\t\t\t\t// The formData should not be mutated, but left as is.\n\t\t\t\t\t\texpect(res.data).to.equal(formData);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tdescribe('signing', function() {\n\n\t\t\tit('should add the access_token to the req.query', function(done) {\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/endpoint', function(res) {\n\t\t\t\t\texpect(res.url).to.eql('https://testable/endpoint');\n\t\t\t\t\texpect(res.query).to.eql(_session);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tit('should mark OAuth1 endpoints with req.proxy', function(done) {\n\n\t\t\t\t// Override\n\t\t\t\ttestable.oauth.version = 1;\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/endpoint', function(res) {\n\n\t\t\t\t\t// Renew\n\t\t\t\t\ttestable.oauth.version = 2;\n\n\t\t\t\t\t// Test\n\t\t\t\t\texpect(res.proxy).to.be.ok();\n\t\t\t\t\texpect(res.oauth_proxy).to.eql(hello.settings.oauth_proxy);\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t});\n\n\t\tdescribe('map', function() {\n\n\t\t\tit('should process req object through the modules.get[req.path] function', function(done) {\n\n\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\ttestable.get.handled = function(p) {\n\t\t\t\t\texpect(p).to.have.property('path', 'handled');\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/handled', {a: 'a'});\n\t\t\t});\n\n\t\t\tit('should process req object through the modules.get.default function if req.path not in module.get', function(done) {\n\n\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\ttestable.get['default'] = function(p) {\n\t\t\t\t\texpect(p).to.have.property('path', 'unhandled');\n\t\t\t\t\tdelete testable.get['default'];\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/unhandled', {a: 'a'});\n\t\t\t});\n\n\t\t\tit('should trigger an error if the mapped value is false', function(done) {\n\n\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\ttestable.get.handled = false;\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/handled')\n\t\t\t\t.then(null, function(res) {\n\n\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\texpect(res.error).to.have.property('code', 'invalid_path');\n\n\t\t\t\t\tdelete testable.get.handled;\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tdescribe('Replace @{} in path with request parameters', function() {\n\n\t\t\t\tit('should define the path using the query parameters and remove them from the query', function(done) {\n\n\t\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\t\ttestable.get.handled = 'endpoint?b=@{a}';\n\n\t\t\t\t\thello('testable')\n\t\t\t\t\t.api('/handled', {a: 'a'})\n\t\t\t\t\t.then(function(res) {\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.url).to.contain('endpoint?b=a');\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.path).to.eql('handled');\n\n\t\t\t\t\t\t// Should remove the property from the req.query\n\t\t\t\t\t\texpect(res.query).to.not.have.property('a');\n\n\t\t\t\t\t\tdelete testable.get.handled;\n\n\t\t\t\t\t\tdone();\n\t\t\t\t\t}, done);\n\t\t\t\t});\n\n\t\t\t\tit('should define the path using the query parameters and remove them from the post data', function(done) {\n\n\t\t\t\t\ttestable.post = testable.post || {};\n\t\t\t\t\ttestable.post.handled = 'endpoint?b=@{a}';\n\n\t\t\t\t\thello('testable')\n\t\t\t\t\t.api('/handled', 'post', {a: 'a'})\n\t\t\t\t\t.then(function(res) {\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.url).to.contain('endpoint?b=a');\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.path).to.eql('handled');\n\n\t\t\t\t\t\t// Should remove the property from the req.query\n\t\t\t\t\t\texpect(res.data).to.not.have.property('a');\n\n\t\t\t\t\t\tdelete testable.get.handled;\n\n\t\t\t\t\t\tdone();\n\t\t\t\t\t}, done);\n\t\t\t\t});\n\n\t\t\t\tit('should trigger an error if there was no query parameter arg, i.e. @{arg}', function(done) {\n\n\t\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\t\ttestable.get.handled = 'endpoint?b=@{a}';\n\n\t\t\t\t\thello('testable')\n\t\t\t\t\t.api('/handled')\n\t\t\t\t\t.then(null, function(res) {\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.error).to.have.property('code', 'missing_attribute');\n\n\t\t\t\t\t\tdelete testable.get.handled;\n\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tit('should use the default value if one is defined i.e. @{arg|default}', function(done) {\n\n\t\t\t\t\ttestable.get = testable.get || {};\n\t\t\t\t\ttestable.get.handled = 'endpoint?empty=@{a|}&arg=@{b|default}';\n\n\t\t\t\t\thello('testable')\n\t\t\t\t\t.api('/handled', function(res) {\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.url).to.contain('endpoint?empty=&arg=default');\n\n\t\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\t\texpect(res.path).to.eql('handled');\n\n\t\t\t\t\t\tdelete testable.get.handled;\n\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t});\n\t\t});\n\n\t\tdescribe('wrap', function() {\n\n\t\t\tit('should trigger the wrap function', function(done) {\n\n\t\t\t\ttestable.wrap = testable.wrap || {};\n\t\t\t\ttestable.wrap.handled = function(req) {\n\t\t\t\t\tdelete testable.wrap.handled;\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/handled');\n\t\t\t});\n\n\t\t\tit('should trigger the wrap.default function if none exists', function(done) {\n\n\t\t\t\ttestable.wrap = testable.wrap || {};\n\t\t\t\ttestable.wrap['default'] = function(req) {\n\t\t\t\t\tdelete testable.wrap['default'];\n\t\t\t\t\tdone();\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/unhandled');\n\t\t\t});\n\n\t\t\tit('should not trigger the wrap function if formatResponse = false', function(done) {\n\n\t\t\t\ttestable.wrap = testable.wrap || {};\n\t\t\t\ttestable.wrap.handled = function(req) {\n\t\t\t\t\tdone(new Error('Wrap handler erroneously called'));\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api({\n\t\t\t\t\tpath: '/handled',\n\t\t\t\t\tformatResponse: false\n\t\t\t\t}).then(function() {\n\t\t\t\t\t// If the response handler was not called then we're good\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t});\n\n\t\tdescribe('paging', function() {\n\n\t\t\tit('should override the path parameter with the hash fragment', function(done) {\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/endpoint#formatting', function(res) {\n\t\t\t\t\texpect(res.url).to.eql('https://testable/endpoint');\n\t\t\t\t\texpect(res.path).to.eql('formatting');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tit('should append the req.path to the hash of the response.paging.next', function(done) {\n\n\t\t\t\ttestable.wrap = testable.wrap || {};\n\t\t\t\ttestable.wrap['default'] = function(req) {\n\t\t\t\t\treq.paging = {next:'next?page=2'};\n\t\t\t\t\tdelete testable.wrap['default'];\n\t\t\t\t};\n\n\t\t\t\thello('testable')\n\t\t\t\t.api('/unhandled', function(res) {\n\n\t\t\t\t\t// Should place the value of a in the parameter list\n\t\t\t\t\texpect(res.paging.next).to.contain('#unhandled');\n\n\t\t\t\t\tdone();\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t});\n","let hello = require('../../../../src/hello.js');\ndescribe('hello events', function() {\n\n\tit('should bind handler using hello.on(eventName, handler) and trigger hello.emit', function(done) {\n\t\tfunction handler() {\n\t\t\tdone();\n\t\t}\n\n\t\thello.on('auth.login', handler);\n\t\thello.emit('auth.login');\n\t\thello.off('auth.login', handler);\n\t});\n\n});\n","\n\tdescribe('hello.getAuthResponse', function() {\n\n\t\tit('should return null when accessing an invalid network implicitly', function() {\n\t\t\t// Make request\n\t\t\tvar r = hello('Facelessbook').getAuthResponse();\n\t\t\texpect(r).to.be(null);\n\t\t});\n\n\t\tit('should return null when accessing an invalid network explicitly', function() {\n\t\t\t// Make request\n\t\t\tvar r = hello.getAuthResponse('Facelessbook');\n\t\t\texpect(r).to.be(null);\n\t\t});\n\t});\n","let hello = require('../../../../src/hello.js');\n\n\tdescribe('hello.init', function() {\n\n\t\tit('should set app credentials and options', function() {\n\n\t\t\tvar credentials = {\n\t\t\t\tservice: 'id'\n\t\t\t};\n\t\t\tvar options = {\n\t\t\t\tredirect_uri: './relative'\n\t\t\t};\n\n\t\t\thello.init(credentials, options);\n\t\t\texpect(hello.settings.redirect_uri).to.match(/\\/relative/);\n\t\t});\n\n\t});\n","define([\n\t'../../libs/errorResponse'\n], function(\n\terrorResponse\n) {\n\n\tdescribe('hello.login', function() {\n\n\t\tvar testable;\n\t\tvar second;\n\n\t\t// Create a dummy network\n\t\tbeforeEach(function() {\n\t\t\t// Create networks\n\t\t\ttestable = {\n\t\t\t\toauth: {\n\t\t\t\t\tauth: 'https://testdemo/access',\n\t\t\t\t\tgrant: 'https://testdemo/grant',\n\t\t\t\t\tversion: 2\n\t\t\t\t},\n\t\t\t\tscope: {\n\t\t\t\t\tbasic: 'basic_scope'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsecond = {\n\t\t\t\toauth: {\n\t\t\t\t\tauth: 'https://testdemo/access',\n\t\t\t\t\tversion: 2\n\t\t\t\t},\n\t\t\t\tscope: {\n\t\t\t\t\tanother_scope: 'another_scope'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add a network\n\t\t\thello.init({\n\t\t\t\ttestable: testable,\n\t\t\t\tsecond: second\n\t\t\t});\n\n\t\t});\n\n\t\t// Destroy it\n\t\tafterEach(function() {\n\t\t\tdelete hello.services.testable;\n\t\t});\n\n\t\tvar utils = hello.utils;\n\t\tvar _open = utils.popup;\n\n\t\tafter(function() {\n\t\t\thello.utils.popup = _open;\n\t\t});\n\n\t\tit('should assign a complete event', function(done) {\n\n\t\t\tvar spy = sinon.spy(function() {done();});\n\n\t\t\tvar popup = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\twindow.open = function() {\n\t\t\t\treturn popup;\n\t\t\t};\n\n\t\t\thello.login('testable', spy);\n\n\t\t\tpopup.closed = true;\n\n\t\t});\n\n\t\tit('should throw a completed and error event if network name is wrong', function(done) {\n\t\t\thello\n\t\t\t\t.login('invalidname', errorResponse('invalid_network', done));\n\t\t});\n\n\t\tit('should throw a error event if network name is wrong', function(done) {\n\t\t\thello\n\t\t\t\t.login('invalidname')\n\t\t\t\t.then(null, errorResponse('invalid_network', done));\n\t\t});\n\n\t\tit('should by default, trigger window.open request', function(done) {\n\n\t\t\tvar spy = sinon.spy(function() {done();});\n\n\t\t\tutils.popup = spy;\n\n\t\t\thello.login('testable');\n\t\t});\n\n\t\tit('should include the basic scope defined by the module, by default', function(done) {\n\n\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\texpect(url).to.contain('scope=' + hello.services.testable.scope.basic);\n\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t\tutils.popup = spy;\n\n\t\t\thello.login('testable');\n\t\t});\n\n\t\tit('should not use \"basic\" as the default scope, if there is no mapping', function(done) {\n\n\t\t\t// Remove the basic scope\n\t\t\tdelete hello.services.testable.scope.basic;\n\n\t\t\t// Now the response should not include the scope...\n\t\t\tvar spy = sinon.spy(function(url) {\n\t\t\t\texpect(url).to.not.contain('scope=basic');\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t\tutils.popup = spy;\n\n\t\t\thello('testable').login();\n\t\t});\n\n\t\tdescribe('options', function() {\n\n\t\t\tit('should apply `options.redirect_uri`', function(done) {\n\n\t\t\t\tvar REDIRECT_URI = 'http://dummydomain.com/';\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, options) {\n\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\n\t\t\t\t\texpect(params.redirect_uri).to.equal(REDIRECT_URI);\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {redirect_uri:REDIRECT_URI});\n\t\t\t});\n\n\t\t\tit('should URIencode `options.redirect_uri`', function(done) {\n\n\t\t\t\tvar REDIRECT_URI = 'http://dummydomain.com/?breakdown';\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\t\texpect(url).to.not.contain(REDIRECT_URI);\n\t\t\t\t\texpect(url).to.contain(encodeURIComponent(REDIRECT_URI));\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {redirect_uri:REDIRECT_URI});\n\t\t\t});\n\n\t\t\tit('should pass through unknown scopes defined in `options.scope`', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\n\t\t\t\t\texpect(params.scope).to.contain('email');\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {scope: 'email'});\n\t\t\t});\n\n\t\t\tit('should include the basic scope defined in the settings `hello.settings.scope`', function(done) {\n\n\t\t\t\thello.settings.scope = ['basic'];\n\t\t\t\ttestable.scope.basic = 'basic';\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\t\t\t\t\texpect(params.scope).to.contain('basic');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {scope: ['email']});\n\t\t\t});\n\n\t\t\tit('should discard common scope, aka scopes undefined by this module but defined as a global standard in the libary (i.e. basic)', function(done) {\n\n\t\t\t\tvar commonScope = 'common_scope';\n\n\t\t\t\t// Set this as a common scope (always set to '')\n\t\t\t\thello.settings.scope_map[commonScope] = '';\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\t\t// Parse parameters\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\n\t\t\t\t\texpect(params.scope).to.not.contain(commonScope);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {scope: commonScope});\n\t\t\t});\n\n\t\t\tit('should not included empty scopes', function(done) {\n\n\t\t\t\tvar scope = 'scope';\n\t\t\t\tvar paddedScope = ',' + scope + ',';\n\t\t\t\tdelete testable.scope.basic;\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\t\t// Parse parameters\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\n\t\t\t\t\texpect(params.scope).to.eql(scope);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {scope: paddedScope});\n\t\t\t});\n\n\t\t\tit('should use the correct and unencoded delimiter to separate scope', function(done) {\n\n\t\t\t\tvar basicScope = 'read_user,read_bikes';\n\t\t\t\tvar scopeDelim = '+';\n\n\t\t\t\thello.init({\n\t\t\t\t\ttest_delimit_scope: {\n\t\t\t\t\t\toauth: {\n\t\t\t\t\t\t\tauth: 'https://testdemo/access',\n\t\t\t\t\t\t\tversion: 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscope_delim: scopeDelim,\n\t\t\t\t\t\tscope: {\n\t\t\t\t\t\t\tbasic: basicScope\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, optins) {\n\n\t\t\t\t\texpect(url).to.contain(basicScope.replace(/[\\+\\,\\s]/, scopeDelim));\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('test_delimit_scope');\n\t\t\t});\n\n\t\t\tit('should space encode the delimiter of multiple response_type\\'s', function(done) {\n\n\t\t\t\tvar opts = {\n\t\t\t\t\tresponse_type: 'code grant_scopes'\n\t\t\t\t};\n\n\t\t\t\tvar spy = sinon.spy(function(url, name) {\n\n\t\t\t\t\texpect(url).to.contain('code%20grant_scopes');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', opts);\n\t\t\t});\n\n\t\t\tit('should substitute \"token\" for \"code\" when there is no Grant URL defined', function(done) {\n\n\t\t\t\tvar opts = {\n\t\t\t\t\tresponse_type: 'code grant_scopes'\n\t\t\t\t};\n\n\t\t\t\thello.services.testable.oauth.grant = null;\n\n\t\t\t\tvar spy = sinon.spy(function(url, name) {\n\n\t\t\t\t\texpect(url).to.contain('token%20grant_scopes');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', opts);\n\t\t\t});\n\t\t});\n\n\t\tdescribe('popup options', function() {\n\n\t\t\tit('should give the popup the default options', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, options) {\n\t\t\t\t\texpect(options.resizable).to.eql('1');\n\t\t\t\t\texpect(options.scrollbars).to.eql('1');\n\t\t\t\t\texpect(options.width).to.eql('500');\n\t\t\t\t\texpect(options.height).to.eql('550');\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable');\n\t\t\t});\n\n\t\t\tit('should allow the popup options to be overridden', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, options) {\n\t\t\t\t\texpect(options.location).to.eql('no');\n\t\t\t\t\texpect(options.toolbar).to.eql('no');\n\t\t\t\t\texpect(options.hidden).to.eql(true);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', {\n\t\t\t\t\tpopup: {\n\t\t\t\t\t\thidden: true,\n\t\t\t\t\t\tlocation: 'no',\n\t\t\t\t\t\ttoolbar: 'no'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tdescribe('option.force = false', function() {\n\n\t\t\tvar _store = hello.utils.store;\n\t\t\tvar session = null;\n\n\t\t\tbeforeEach(function() {\n\n\t\t\t\tsession = {\n\t\t\t\t\taccess_token: 'token',\n\t\t\t\t\texpires: ((new Date()).getTime() / 1e3) + 1000,\n\t\t\t\t\tscope: 'basic'\n\t\t\t\t};\n\n\t\t\t\thello.utils.store = function() {\n\t\t\t\t\treturn session;\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tafterEach(function() {\n\n\t\t\t\thello.utils.store = _store;\n\t\t\t});\n\n\t\t\tit('should not trigger the popup if there is a valid session', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(done.bind(null, new Error('window.open should not be called')));\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello('testable').login({force: false}).then(function(r) {\n\t\t\t\t\texpect(spy.notCalled).to.be.ok();\n\t\t\t\t\texpect(r.authResponse).to.eql(session);\n\t\t\t\t\tdone();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tit('should trigger the popup if the token has expired', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(function() {\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\tsession.expires = ((new Date()).getTime() / 1e3) - 1000;\n\n\t\t\t\thello('testable').login({force: false});\n\t\t\t});\n\n\t\t\tit('should trigger the popup if the scopes have changed', function(done) {\n\n\t\t\t\tvar spy = sinon.spy(function() {\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello('testable').login({force: false, scope: 'not-basic'});\n\t\t\t});\n\t\t});\n\n\t\tdescribe('custom query string parameters', function() {\n\n\t\t\tit('should attach custom parameters to the querystring', function(done) {\n\n\t\t\t\tvar options = {\n\t\t\t\t\tcustom: 'custom'\n\t\t\t\t};\n\n\t\t\t\tvar spy = sinon.spy(function(url, name, options) {\n\n\t\t\t\t\tvar params = hello.utils.param(url.split('?')[1]);\n\n\t\t\t\t\texpect(params).to.have.property('custom', options.custom);\n\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\thello.login('testable', options);\n\t\t\t});\n\t\t});\n\n\t\tdescribe('global events', function() {\n\n\t\t\tit('should trigger an auth.init event before requesting the auth flow', function(done) {\n\n\t\t\t\t// Listen out for the auth-flow\n\t\t\t\thello.on('auth.init', function(e) {\n\t\t\t\t\texpect(e).to.have.property('network', 'testable');\n\t\t\t\t\texpect(spy.notCalled).to.be.ok();\n\t\t\t\t\tdone();\n\t\t\t\t});\n\n\t\t\t\t// Go no further\n\t\t\t\tvar spy = sinon.spy();\n\t\t\t\tutils.popup = spy;\n\n\t\t\t\t// Login\n\t\t\t\thello('testable').login({force: true});\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n});\n","define([\n\t'../../libs/errorResponse'\n], function(\n\terrorResponse\n) {\n\n\tdescribe('hello.logout', function() {\n\n\t\tbefore(function() {\n\t\t\thello.init({\n\t\t\t\ttest: {\n\t\t\t\t\tname: 'test',\n\t\t\t\t\tid: 'id'\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tafter(function() {\n\t\t\tdelete hello.services.test;\n\t\t});\n\n\t\tit('should trigger an error when network is unknown', function(done) {\n\t\t\t// Make request\n\t\t\thello('unknown')\n\t\t\t\t.logout()\n\t\t\t\t.then(null, errorResponse('invalid_network', done));\n\t\t});\n\n\t\tit('should assign a complete event', function(done) {\n\t\t\thello('unknown').logout(function() {done();});\n\t\t});\n\n\t\tit('should throw an error events in the eventCompleted handler', function(done) {\n\t\t\thello('unknown').logout(function(e) {\n\t\t\t\texpect(e).to.have.property('error');\n\t\t\t\tdone();\n\t\t\t});\n\t\t});\n\n\t\tdescribe('remove session from store', function() {\n\n\t\t\tvar store = hello.utils.store;\n\n\t\t\tbeforeEach(function() {\n\t\t\t\thello.utils.store = store;\n\t\t\t});\n\n\t\t\tafterEach(function() {\n\t\t\t\thello.utils.store = store;\n\t\t\t});\n\n\t\t\tit('should remove the session from the localStorage', function() {\n\n\t\t\t\tvar spy = sinon.spy(function() {\n\t\t\t\t\treturn {};\n\t\t\t\t});\n\n\t\t\t\thello.utils.store = spy;\n\n\t\t\t\thello('test').logout();\n\n\t\t\t\texpect(spy.calledWith('test', null)).to.be.ok();\n\t\t\t});\n\t\t});\n\n\t\tdescribe('force=true', function() {\n\n\t\t\tdescribe('module.logout handler', function() {\n\n\t\t\t\tvar module = {\n\t\t\t\t\tlogout: function() {}\n\t\t\t\t};\n\n\t\t\t\tvar store = hello.utils.store;\n\t\t\t\tvar session = {};\n\n\t\t\t\tbeforeEach(function() {\n\n\t\t\t\t\t// Clear all services\n\t\t\t\t\tdelete hello.services.testable;\n\n\t\t\t\t\thello.init({\n\t\t\t\t\t\ttestable: module\n\t\t\t\t\t});\n\n\t\t\t\t\thello.utils.store = function() {\n\t\t\t\t\t\treturn session;\n\t\t\t\t\t};\n\n\t\t\t\t});\n\n\t\t\t\tafterEach(function() {\n\t\t\t\t\t// Restore... bah dum!\n\t\t\t\t\thello.utils.store = store;\n\t\t\t\t});\n\n\t\t\t\tit('should call module.logout', function(done) {\n\n\t\t\t\t\tmodule.logout = function() {\n\t\t\t\t\t\tdone();\n\t\t\t\t\t};\n\n\t\t\t\t\thello('testable').logout({force:true});\n\t\t\t\t});\n\n\t\t\t\tit('should attach authResponse object to the options.authResponse', function(done) {\n\n\t\t\t\t\tmodule.logout = function(callback, options) {\n\t\t\t\t\t\texpect(options).to.have.property('authResponse', session);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t};\n\n\t\t\t\t\thello('testable').logout({force:true});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n});\n","define([], function() {\n\n\tdescribe('hello.use', function() {\n\n\t\tit('should set the service on the current instance only', function() {\n\t\t\tvar root = hello;\n\t\t\tvar rootService = hello.settings.default_service;\n\t\t\tvar instance = hello('instance');\n\t\t\tvar descendent = instance.use('descendent');\n\t\t\texpect(hello.settings.default_service).to.be(rootService);\n\t\t\texpect(instance.settings.default_service).to.be('instance');\n\t\t\texpect(descendent.settings.default_service).to.be('descendent');\n\t\t});\n\n\t\tit('should return a new instance', function() {\n\n\t\t\tvar instance = hello('instance');\n\t\t\texpect(instance).to.not.be(hello);\n\t\t});\n\n\t});\n\n});\n","// Session monitor\ndefine([], function() {\n\n\tdescribe('Session monitor', function() {\n\n\t\tbeforeEach(function() {\n\t\t\t// Define the service\n\t\t\thello.services.test = {\n\t\t\t\tid: 'id'\n\t\t\t};\n\t\t});\n\n\t\tafterEach(function() {\n\t\t\t// Define the service\n\t\t\tdelete hello.services.test;\n\t\t});\n\n\t\tit('should listen to changes within shared storage and trigger global callbacks where they have otherwise not been triggered', function(done) {\n\n\t\t\t// Create a callback\n\t\t\tvar callbackName = hello.utils.globalEvent(function(obj) {\n\t\t\t\texpect(obj).to.have.property('access_token', 'token');\n\t\t\t\texpect(obj).to.have.property('expires_in', 3600);\n\n\t\t\t\t// Should remove the callback from the session\n\t\t\t\texpect(obj).to.not.have.property('callback');\n\t\t\t\tdone();\n\t\t\t});\n\n\t\t\t// Construct an AuthResponse\n\t\t\tvar obj = {\n\t\t\t\tcallback: callbackName,\n\t\t\t\taccess_token: 'token',\n\t\t\t\texpires_in: 3600\n\t\t\t};\n\n\t\t\t// Store the new auth response and the global callback will be triggered\n\t\t\thello.utils.store('test', obj);\n\t\t});\n\n\t\tit('should ignore services which do not have an id defined', function(done) {\n\t\t\t// Create a spy\n\t\t\tvar spy = sinon.spy(done);\n\n\t\t\t// Remove the id from the test service\n\t\t\tdelete hello.services.test.id;\n\n\t\t\t// Create a callback\n\t\t\tvar callbackName = hello.utils.globalEvent(spy);\n\n\t\t\t// Construct an AuthResponse\n\t\t\tvar obj = {\n\t\t\t\tcallback: callbackName,\n\t\t\t\taccess_token: 'token',\n\t\t\t\texpires_in: 3600\n\t\t\t};\n\n\t\t\t// Store the new auth response and the global callback will be triggered\n\t\t\thello.utils.store('test', obj);\n\n\t\t\t// Create a timer\n\t\t\tsetTimeout(function() {\n\t\t\t\texpect(spy.called).to.not.be.ok();\n\t\t\t\tdone();\n\t\t\t}, 1500);\n\t\t});\n\t});\n\n});\n","// Chrome Packaged Apps\n// The Chrome Extension redefines the \"hello.utils.popup\"\n\ndescribe('ChromeApp hello.utils.popup', function() {\n\n\tvar _launch = chrome.identity.launchWebAuthFlow;\n\n\tafter(function() {\n\t\tchrome.identity.launchWebAuthFlow = _launch;\n\t});\n\n\tit('Should launch chrome.identity.launchWebAuthFlow', function() {\n\n\t\tvar spy = sinon.spy();\n\n\t\tchrome.identity.launchWebAuthFlow = spy;\n\n\t\thello.utils.popup('https://doma.in/oauth/auth', 'https://redirect.uri/path', {});\n\n\t\texpect(spy.calledOnce).to.be.ok();\n\t});\n});\n","// API, A quick run through of the endpoints and their responses\ndefine(['./helper', '../../stubs/endpoints'], function(helper, endpoints) {\n\n\t// Endpoints is an generated array of files in the stubs directory.\n\t// Here we are using it to simulate a range of API requests and responses to see how Hello.API handles them.\n\n\tdescribe('API endpoints', function() {\n\n\t\thelper.sharedSetup();\n\n\t\thelper.forEach(endpoints, function(fileName) {\n\n\t\t\t// Extract from the file name the endpoint request\n\t\t\tvar m = fileName.match(/([a-z]+)\\/(get|post|del|put)\\/(.*?)(;[^.]+)?(\\-([a-z]+))?\\.json/);\n\t\t\tvar network = m[1];\n\t\t\tvar method = m[2];\n\t\t\tvar path = m[3];\n\t\t\tvar query = m[4];\n\t\t\tvar errors = m[5];\n\n\t\t\t// Format query\n\t\t\tif (query) {\n\t\t\t\tquery = splitter(query, ';', '-');\n\t\t\t}\n\n\t\t\tit('should handle ' + m.slice(1, 5).join(' '), function(done) {\n\n\t\t\t\tvar req = {\n\t\t\t\t\tpath: path,\n\t\t\t\t\tmethod: method,\n\t\t\t\t\tquery: query,\n\t\t\t\t\tstub: m[0]\n\t\t\t\t};\n\n\t\t\t\tvar promise = hello(network).api(req);\n\n\t\t\t\tif (!errors) {\n\t\t\t\t\tpromise.then(function() {\n\t\t\t\t\t\tdone();\n\t\t\t\t\t}, done);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.then(done, function() {\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t});\n});\n\nfunction splitter(str, delim, sep) {\n\tvar q = {};\n\n\tstr.split(delim).forEach(function(s) {\n\t\tif (s === '') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar m = s.split(sep);\n\t\tq[m[0]] = m[1];\n\t});\n\n\treturn q;\n}\n","define(['./helper'], function(helper) {\n\n\tdescribe('hello.api(\\'/me\\')', function() {\n\n\t\thelper.sharedSetup();\n\n\t\tvar tests = [\n\t\t\t{\n\t\t\t\tnetwork: 'bikeindex',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '13674',\n\t\t\t\t\tthumbnail: undefined\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'access_denied',\n\t\t\t\t\tmessage: 'OAuth error: unauthorized'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'box',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '197571718',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://app.box.com/api/avatar/large/197571718'\n\t\t\t\t},\n\t\t\t\terrorExpect: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'dropbox',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 374434467,\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: undefined\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'server_error',\n\t\t\t\t\tmessage: 'The given OAuth 2 access token doesn\\'t exist or has expired.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'facebook',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '100008806508341',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://graph.facebook.com/100008806508341/picture'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 190,\n\t\t\t\t\tmessage: 'Invalid OAuth access token.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'flickr',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '34790912@N05',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://farm4.staticflickr.com/3729/buddyicons/34790912@N05_l.jpg'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: 'User not found'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'foursquare',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '110649444',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://irs0.4sqi.net/img/user/100x100/110649444-XTNO1LD24NJOW0TW.jpg'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'access_denied',\n\t\t\t\t\tmessage: 'OAuth token invalid or revoked.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'github',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 10398423,\n\t\t\t\t\tname: 'janemcgee35',\n\t\t\t\t\tthumbnail: 'https://avatars.githubusercontent.com/u/10398423?v=3'\n\t\t\t\t},\n\t\t\t\terrorExpect: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'google',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '115111284799080900590',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://lh3.googleusercontent.com/-NWCgcgRDieE/AAAAAAAAAAI/AAAAAAAAABc/DCi-M8IuzMo/photo.jpg?sz=50'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 403,\n\t\t\t\t\tmessage: 'Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'instagram',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '1636340308',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://igcdn-photos-h-a.akamaihd.net/hphotos-ak-xaf1/t51.2885-19/10919499_876030935750711_2062576510_a.jpg'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'OAuthParameterException',\n\t\t\t\t\tmessage: 'Missing client_id or access_token URL parameter.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'joinme',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 'janemcgee35@join.me',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: undefined\n\t\t\t\t},\n\t\t\t\terrorExpect: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'linkedin',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 'sDsPqKdBkl',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://media.licdn.com/mpr/mprx/0_oFea4Eo2n6j5ZQS2oLwg4HE7NiWQ4Qp2H_yl4dVyw6gBFGIuQ3ZGnWmtsSdZUTjhIXErcmkkxGoX'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 401,\n\t\t\t\t\tmessage: 'Unknown authentication scheme'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'soundcloud',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 131420710,\n\t\t\t\t\tname: 'janemcgee35',\n\t\t\t\t\tthumbnail: 'https://i1.sndcdn.com/avatars-000123511300-upb183-large.jpg'\n\t\t\t\t},\n\t\t\t\terrorExpect: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'twitter',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 2961707375,\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://pbs.twimg.com/profile_images/552017091583152128/a8lyS35y_normal.jpeg'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'request_failed',\n\t\t\t\t\tmessage: 'Bad Authentication data'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'vk',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 434460,\n\t\t\t\t\tname: ' ',\n\t\t\t\t\tthumbnail: 'http://cs304605.vk.me/u434460/d_1acca7c0.jpg'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 10,\n\t\t\t\t\tmessage: 'Internal server error: could not get application'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'windows',\n\t\t\t\texpect: {\n\t\t\t\t\tid: '939f37452466502a',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://apis.live.net/v5.0/939f37452466502a/picture?access_token=token'\n\t\t\t\t},\n\t\t\t\terrorExpect: {\n\t\t\t\t\tcode: 'request_token_invalid',\n\t\t\t\t\tmessage: 'The access token isn\\'t valid.'\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'yahoo',\n\t\t\t\texpect: {\n\t\t\t\t\tid: 'UKGYDRAHEWONVO35KOOBBGQ4UU',\n\t\t\t\t\tname: 'Jane McGee',\n\t\t\t\t\tthumbnail: 'https://socialprofiles.zenfs.com/images/805efb9485e4878f21be4d9e9e5890ca_192.png'\n\t\t\t\t},\n\t\t\t\terrorExpect: false\n\t\t\t}\n\t\t];\n\n\t\tdescribe('authorised requests', function() {\n\n\t\t\thelper.forEach(tests, function(test) {\n\n\t\t\t\tit('should format ' + test.network + ' correctly', function(done) {\n\n\t\t\t\t\thello(test.network)\n\t\t\t\t\t.api('/me', {\n\t\t\t\t\t\taccess_token: 'token'\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(me) {\n\t\t\t\t\t\texpect(me.id).to.be(test.expect.id);\n\t\t\t\t\t\texpect(me.name).to.be(test.expect.name);\n\t\t\t\t\t\texpect(me.thumbnail).to.be(test.expect.thumbnail);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t})\n\t\t\t\t\t.then(null, done);\n\n\t\t\t\t});\n\n\t\t\t});\n\t\t});\n\n\t\tdescribe('unauthorised requests', function() {\n\n\t\t\thelper.forEach(tests, function(test) {\n\n\t\t\t\tif (!test.errorExpect) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tit('should trigger the error handler for ' + test.network, function(done) {\n\n\t\t\t\t\thello(test.network)\n\t\t\t\t\t.api('/me', {\n\t\t\t\t\t\tstubType: '-unauth',\n\t\t\t\t\t\taccess_token: null\n\t\t\t\t\t})\n\t\t\t\t\t.then(done, function(data) {\n\t\t\t\t\t\texpect(data.error).to.not.be(undefined);\n\t\t\t\t\t\texpect(data.error.code).to.be(test.errorExpect.code);\n\t\t\t\t\t\texpect(data.error.message).to.be(test.errorExpect.message);\n\t\t\t\t\t\tdone();\n\t\t\t\t\t})\n\t\t\t\t\t.then(null, done);\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n});\n","define(['./helper'], function(helper) {\n\n\tdescribe('hello.api(\\'/me/album\\')', function() {\n\n\t\thelper.sharedSetup();\n\n\t\tvar tests = [\n\t\t\t{\n\t\t\t\tnetwork: 'google',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 6,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'https://picasaweb.google.com/data/entry/api/user/115111284799080900590/albumid/6101137643479860177/photoid/6101137651261702722?alt=json',\n\t\t\t\t\t\tname: 'bling-piggy.jpg',\n\t\t\t\t\t\tpicture: 'https://lh5.googleusercontent.com/-WYnDVp26U7k/VKuYXl03AkI/AAAAAAAAADU/nOsGBUZecRw/bling-piggy.jpg'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'facebook',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 7,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '1380486122254925',\n\t\t\t\t\t\tname: undefined,\n\t\t\t\t\t\tpicture: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xfa1/v/t1.0-9/s130x130/10924813_1380486122254925_8328783981056301338_n.jpg?oh=d703e6d45262e4996a783dcd056dec03&oe=5531C3B7&__gda__=1429692476_20dfea8df43185ea83fd611e043f5213'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'windows',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 7,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'file.939f37452466502a.939F37452466502A!117',\n\t\t\t\t\t\tname: 'funeral-piggy.jpg',\n\t\t\t\t\t\tpicture: 'https://public-ch3301.files.1drv.com/y2mVoR3TWKeWdH5vzmYmYyFRaFRlj0FPPy6zAcQWY2hy9tcjqWfKc5Uqg2ctPFwuz-WmPIhp5gZKZz8SU3gFx1vNdVDmLetto8IOMRpD0wAKoQMl1IWJFPCmu-hE8-FVB2Eb4x9885zel5SRdAqfsR3OA/funeral-piggy.jpg?psid=1'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thelper.forEach(tests, function(test) {\n\n\t\t\tit('should format ' + test.network + ' correctly', function(done) {\n\n\t\t\t\thello(test.network)\n\t\t\t\t.api('/me/album', {\n\t\t\t\t\tid: 'album-id'\n\t\t\t\t})\n\t\t\t\t.then(function(album) {\n\t\t\t\t\tvar first = album.data[0];\n\t\t\t\t\texpect(album.data.length).to.be(test.expect.length);\n\t\t\t\t\texpect(first.id).to.be(test.expect.first.id);\n\t\t\t\t\texpect(first.name).to.be(test.expect.first.name);\n\t\t\t\t\texpect(first.picture).to.be(test.expect.first.picture);\n\t\t\t\t\tdone();\n\t\t\t\t})\n\t\t\t\t.then(null, done);\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n});\n","define(['./helper'], function(helper) {\n\n\tdescribe('hello.api(\\'/me/albums\\')', function() {\n\n\t\thelper.sharedSetup();\n\n\t\tvar tests = [\n\t\t\t{\n\t\t\t\tnetwork: 'facebook',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 3,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '1380499628920241',\n\t\t\t\t\t\tname: 'Timeline Photos',\n\t\t\t\t\t\tthumbnail: 'https://graph.facebook.com/10152107682897233/picture?access_token=token',\n\t\t\t\t\t\tphotos: undefined\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'flickr',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 3,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '72157627511003764',\n\t\t\t\t\t\tname: 'Wales with mum and Matt - dropped in on Ozzy',\n\t\t\t\t\t\tphotos: 'https://api.flickr.com/services/rest?method=flickr.photosets.getPhotos&api_key=undefined&format=json&photoset_id=72157627511003764'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'google',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 2,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'https://picasaweb.google.com/data/entry/api/user/115111284799080900590/albumid/6101137643479860177?alt=json',\n\t\t\t\t\t\tname: '2015-01-06',\n\t\t\t\t\t\tthumbnail: 'https://lh4.googleusercontent.com/-FwGrKcgx4II/VKuYXI1hg9E/AAAAAAAAADQ/_EpYdYBoAng/s160-c/20150106.jpg',\n\t\t\t\t\t\tphotos: 'https://picasaweb.google.com/data/feed/api/user/115111284799080900590/albumid/6101137643479860177?alt=json&authkey=Gv1sRgCJW1vqqlkp_74wE'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'windows',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 2,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'folder.939f37452466502a.939F37452466502A!115',\n\t\t\t\t\t\tname: 'More Pictures',\n\t\t\t\t\t\tthumbnail: undefined,\n\t\t\t\t\t\tphotos: 'https://apis.live.net/v5.0/folder.939f37452466502a.939F37452466502A!115/photos'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thelper.forEach(tests, function(test) {\n\n\t\t\tit('should format ' + test.network + ' correctly', function(done) {\n\t\t\t\thello(test.network)\n\t\t\t\t.api('/me/albums', {\n\t\t\t\t\taccess_token: 'token'\n\t\t\t\t})\n\t\t\t\t.then(function(albums) {\n\t\t\t\t\tvar first = albums.data[0];\n\t\t\t\t\texpect(albums.data).not.to.be(undefined);\n\t\t\t\t\texpect(albums.data.length).to.be(test.expect.length);\n\t\t\t\t\texpect(first.id).to.be(test.expect.first.id);\n\t\t\t\t\texpect(first.name).to.be(test.expect.first.name);\n\t\t\t\t\texpect(first.thumbnail).to.be(test.expect.first.thumbnail);\n\t\t\t\t\texpect(first.photos).to.be(test.expect.first.photos);\n\t\t\t\t\tdone();\n\t\t\t\t})\n\t\t\t\t.then(null, done);\n\t\t\t});\n\t\t});\n\t});\n});\n","// Test GET me/friends\n\ndefine(['./helper'], function(helper) {\n\n\tdescribe('hello.api(\\'/me/friends\\')', function() {\n\n\t\thelper.sharedSetup();\n\n\t\tvar tests = ['flickr', 'foursquare', 'github', 'google', 'linkedin', 'soundcloud', 'twitter', 'windows', 'yahoo'];\n\n\t\ttests.forEach(function(network) {\n\n\t\t\tit('should format ' + network + ':me/friends correctly', function(done) {\n\n\t\t\t\thello(network)\n\t\t\t\t.api('/me/friends')\n\t\t\t\t.then(function(friends) {\n\t\t\t\t\tfriends.data.forEach(function(friend) {\n\t\t\t\t\t\texpect(friend.id).to.be.ok();\n\t\t\t\t\t\texpect(friend.name).to.be.ok();\n\t\t\t\t\t\tif (friend.thumbnail) {\n\t\t\t\t\t\t\texpect(friend.thumbnail).to.match(/^https?\\:\\/\\/[a-z0-9\\.\\-]+\\/.*/i);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\texpect(friends.data.length).to.be.ok();\n\n\t\t\t\t\tdone();\n\t\t\t\t})\n\t\t\t\t.then(null, done);\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n});\n","define(['./helper'], function(helper) {\n\n\tdescribe('hello.api(\\'/me/photos\\')', function() {\n\n\t\thelper.sharedSetup();\n\n\t\tvar tests = [\n\t\t\t{\n\t\t\t\tnetwork: 'instagram',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 5,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '891783660020488189_1636340308',\n\t\t\t\t\t\tname: 'Red Carpet Piggy',\n\t\t\t\t\t\tpicture: 'http://scontent-a.cdninstagram.com/hphotos-xaf1/t51.2885-15/10903489_924233790922795_96516085_n.jpg',\n\t\t\t\t\t\tpictures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'http://scontent-a.cdninstagram.com/hphotos-xaf1/t51.2885-15/10903489_924233790922795_96516085_s.jpg',\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\theight: 150\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'http://scontent-a.cdninstagram.com/hphotos-xaf1/t51.2885-15/10903489_924233790922795_96516085_a.jpg',\n\t\t\t\t\t\t\t\twidth: 306,\n\t\t\t\t\t\t\t\theight: 306\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'http://scontent-a.cdninstagram.com/hphotos-xaf1/t51.2885-15/10903489_924233790922795_96516085_n.jpg',\n\t\t\t\t\t\t\t\twidth: 640,\n\t\t\t\t\t\t\t\theight: 640\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'google',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 7,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'https://picasaweb.google.com/data/entry/api/user/115111284799080900590/albumid/6101137643479860177/photoid/6101137679962229346?alt=json',\n\t\t\t\t\t\tname: 'wistful-piggy.jpg',\n\t\t\t\t\t\tpicture: 'https://lh3.googleusercontent.com/-A9K1HZCyma8/VKuYZQvmSmI/AAAAAAAAADU/9AvsN7uNS2Y/wistful-piggy.jpg',\n\t\t\t\t\t\tpictures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://lh3.googleusercontent.com/-A9K1HZCyma8/VKuYZQvmSmI/AAAAAAAAADU/9AvsN7uNS2Y/s72/wistful-piggy.jpg',\n\t\t\t\t\t\t\t\twidth: 48,\n\t\t\t\t\t\t\t\theight: 72\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://lh3.googleusercontent.com/-A9K1HZCyma8/VKuYZQvmSmI/AAAAAAAAADU/9AvsN7uNS2Y/s144/wistful-piggy.jpg',\n\t\t\t\t\t\t\t\twidth: 96,\n\t\t\t\t\t\t\t\theight: 144\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://lh3.googleusercontent.com/-A9K1HZCyma8/VKuYZQvmSmI/AAAAAAAAADU/9AvsN7uNS2Y/s288/wistful-piggy.jpg',\n\t\t\t\t\t\t\t\twidth: 192,\n\t\t\t\t\t\t\t\theight: 288\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://lh3.googleusercontent.com/-A9K1HZCyma8/VKuYZQvmSmI/AAAAAAAAADU/9AvsN7uNS2Y/wistful-piggy.jpg',\n\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\t\theight: 450\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'facebook',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 5,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '1380493922254145',\n\t\t\t\t\t\tname: 'LBD Piggy',\n\t\t\t\t\t\tpicture: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/s130x130/10897962_1380493922254145_5386757285347386511_n.jpg?oh=98e30ce334bf9cb01f808c0c1134afff&oe=55291C94&__gda__=1429910956_84b3b9a2d5d9326485e630290657afcc',\n\t\t\t\t\t\tpictures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/p130x130/10897962_1380493922254145_5386757285347386511_n.jpg?oh=c844758a0168dc0fa20106614496f20f&oe=553CD544&__gda__=1433335420_b6b78a2b6554da54741dffea139b18bf',\n\t\t\t\t\t\t\t\twidth: 130,\n\t\t\t\t\t\t\t\theight: 147\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/p75x225/10897962_1380493922254145_5386757285347386511_n.jpg?oh=ea4175f2762b46d4b8b3bfb663a0cc91&oe=55361281&__gda__=1428907231_a5b7ab31f4bdf6ad829389734e4bf42b',\n\t\t\t\t\t\t\t\twidth: 198,\n\t\t\t\t\t\t\t\theight: 225\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/p320x320/10897962_1380493922254145_5386757285347386511_n.jpg?oh=be66c3ee515536d73917146cfa6f7d86&oe=552CF0A3&__gda__=1428296859_6705bd7c1183d77b84a9249492334798',\n\t\t\t\t\t\t\t\twidth: 320,\n\t\t\t\t\t\t\t\theight: 362\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/p180x540/10897962_1380493922254145_5386757285347386511_n.jpg?oh=a5cd1de629354d1b880133cf314408c9&oe=552BFCE8&__gda__=1430386896_07316fcb7c40fc98585837b6b33773ff',\n\t\t\t\t\t\t\t\twidth: 477,\n\t\t\t\t\t\t\t\theight: 540\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/v/t1.0-9/p480x480/10897962_1380493922254145_5386757285347386511_n.jpg?oh=be2c6c759107eecf58c323cfb2053492&oe=553FE4E4&__gda__=1428803548_71b51cb1f98f4eb0608bcb11df5cb8bf',\n\t\t\t\t\t\t\t\twidth: 480,\n\t\t\t\t\t\t\t\theight: 543\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/p600x600/10896389_1380493922254145_5386757285347386511_o.jpg',\n\t\t\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\t\t\theight: 679\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/p720x720/10896389_1380493922254145_5386757285347386511_o.jpg',\n\t\t\t\t\t\t\t\twidth: 720,\n\t\t\t\t\t\t\t\theight: 815\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/p960x960/10896389_1380493922254145_5386757285347386511_o.jpg',\n\t\t\t\t\t\t\t\twidth: 960,\n\t\t\t\t\t\t\t\theight: 1086\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xap1/t31.0-8/10896389_1380493922254145_5386757285347386511_o.jpg',\n\t\t\t\t\t\t\t\twidth: 1809,\n\t\t\t\t\t\t\t\theight: 2048\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'flickr',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 5,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: '6206400436',\n\t\t\t\t\t\tname: 'DSC03367',\n\t\t\t\t\t\tpicture: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99.jpg',\n\t\t\t\t\t\tpictures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_t.jpg',\n\t\t\t\t\t\t\t\twidth: 100,\n\t\t\t\t\t\t\t\theight: 100\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_m.jpg',\n\t\t\t\t\t\t\t\twidth: 240,\n\t\t\t\t\t\t\t\theight: 240\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_n.jpg',\n\t\t\t\t\t\t\t\twidth: 320,\n\t\t\t\t\t\t\t\theight: 320\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99.jpg',\n\t\t\t\t\t\t\t\twidth: 500,\n\t\t\t\t\t\t\t\theight: 500\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_z.jpg',\n\t\t\t\t\t\t\t\twidth: 640,\n\t\t\t\t\t\t\t\theight: 640\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_c.jpg',\n\t\t\t\t\t\t\t\twidth: 800,\n\t\t\t\t\t\t\t\theight: 800\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_b.jpg',\n\t\t\t\t\t\t\t\twidth: 1024,\n\t\t\t\t\t\t\t\theight: 1024\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_h.jpg',\n\t\t\t\t\t\t\t\twidth: 1600,\n\t\t\t\t\t\t\t\theight: 1600\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_k.jpg',\n\t\t\t\t\t\t\t\twidth: 2048,\n\t\t\t\t\t\t\t\theight: 2048\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://farm7.staticflickr.com/6162/6206400436_1d15b3aa99_o.jpg',\n\t\t\t\t\t\t\t\twidth: 2048,\n\t\t\t\t\t\t\t\theight: 2048\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tnetwork: 'windows',\n\t\t\t\texpect: {\n\t\t\t\t\tlength: 7,\n\t\t\t\t\tfirst: {\n\t\t\t\t\t\tid: 'file.939f37452466502a.939F37452466502A!109',\n\t\t\t\t\t\tname: 'funeral-piggy.jpg',\n\t\t\t\t\t\tpicture: 'https://public-ch3301.files.1drv.com/y2mtE3u-1oVm7UJkYR5Ylxn2b8BR4attabxQ0AEiajowKHvlJUZBxjLpP8LWG4Pi4ZEuDyQFELhxSxoNNHxP--6kcx0Z6mCsWnYjR1_1-izBx8HkqE1ghH6I22bQtIKPjFXnXJbHtHXhFgvQwq7eKZ03Q/funeral-piggy.jpg?psid=1',\n\t\t\t\t\t\tpictures: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://public-ch3301.files.1drv.com/y2mtE3u-1oVm7UJkYR5Ylxn2b8BR4attabxQ0AEiajowKHvlJUZBxjLpP8LWG4Pi4ZEuDyQFELhxSxoNNHxP--6kcx0Z6mCsWnYjR1_1-izBx8HkqE1ghH6I22bQtIKPjFXnXJbHtHXhFgvQwq7eKZ03Q/funeral-piggy.jpg?psid=1',\n\t\t\t\t\t\t\t\twidth: 85,\n\t\t\t\t\t\t\t\theight: 96\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://public-ch3301.files.1drv.com/y2mrLoEhkFAzHOjlFCyVV4ypi_TtACvF476rRuvAOBoVSsNJrt722EP9xCR_b_Z0qa8vocx8kNPlxoUFehnT_7e6LD-L8J14V-SzD5nCRiiT-Mg8J2pKgtW_pf6XD2Sg7oS/funeral-piggy.jpg?psid=1&ck=2&ex=720',\n\t\t\t\t\t\t\t\twidth: 156,\n\t\t\t\t\t\t\t\theight: 176\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://public-ch3301.files.1drv.com/y2mqUA8S78mIJyXz1Tof4bZ8a_4CuConMxRIJ4nZ2I6QyQDjmshrQb393fB8xwt_5b_3b1-je4c_OlJbXJVF9oafdXw1t7eB4rqFTuVZAq-snGg1ksLwLM3OAJUUPGTidy6/funeral-piggy.jpg?psid=1&ck=2&ex=720',\n\t\t\t\t\t\t\t\twidth: 707,\n\t\t\t\t\t\t\t\theight: 800\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsource: 'https://public-ch3301.files.1drv.com/y2mg6goRE11zDIFTJ7rokvWLucBkeD6k6ljXPP2ARkUjR2rfo5-xU13wAU23CrmaGEsIr6NIeXfetdx0htCjqUb7QYttyRnuP2BXFJ0f_7uEA5NGIeH2tk6_DjFoUUIHKg-KdFDuKWM_FHUe48vF6fr4g/funeral-piggy.jpg?psid=1',\n\t\t\t\t\t\t\t\twidth: 2000,\n\t\t\t\t\t\t\t\theight: 2263\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thelper.forEach(tests, function(test) {\n\n\t\t\tit('should format ' + test.network + ' correctly', function(done) {\n\n\t\t\t\thello(test.network)\n\t\t\t\t.api('/me/photos')\n\t\t\t\t.then(function(photos) {\n\t\t\t\t\tvar first = photos.data[0];\n\t\t\t\t\texpect(photos.data.length).to.be(test.expect.length);\n\t\t\t\t\texpect(first.id).to.be(test.expect.first.id);\n\t\t\t\t\texpect(first.name).to.be(test.expect.first.name);\n\t\t\t\t\texpect(first.picture).to.be(test.expect.first.picture);\n\t\t\t\t\tif (test.expect.first.pictures)\n\t\t\t\t\t\texpect(first.pictures).to.eql(test.expect.first.pictures);\n\t\t\t\t\tdone();\n\t\t\t\t})\n\t\t\t\t.then(null, done);\n\n\t\t\t});\n\n\t\t});\n\n\t});\n\n});\n","define([], function() {\n\n\t// Shim up IE8\n\tif ((typeof XMLHttpRequest !== 'undefined') && !('withCredentials' in (new XMLHttpRequest()))) {\n\n\t\tXMLHttpRequest.prototype.withCredentials = true;\n\t\thello.utils.xhr = function(method, url, headers, body, callback) {\n\t\t\tvar x = new XMLHttpRequest();\n\t\t\tx.onreadystatechange = function() {\n\t\t\t\tif (x.readyState === 4) {\n\t\t\t\t\tvar r = x.responseText;\n\t\t\t\t\tr = JSON.parse(r);\n\t\t\t\t\tcallback(r);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tx.open(method, url);\n\t\t\tx.send(body);\n\t\t\treturn x;\n\t\t};\n\t}\n\n\treturn {\n\n\t\tforEach: function(collection, fn) {\n\t\t\tif (collection && collection.length) {\n\t\t\t\tfor (var i = 0; i < collection.length; i += 1) {\n\t\t\t\t\tfn(collection[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tgetRequestProxy: function(originalRequest) {\n\n\t\t\tvar requestProxy = function(req, callback) {\n\n\t\t\t\tvar r = {\n\t\t\t\t\tnetwork: req.network,\n\t\t\t\t\tmethod: 'get',\n\t\t\t\t\turl: req.url,\n\t\t\t\t\tdata: req.data,\n\t\t\t\t\tquery: {},\n\t\t\t\t\txhr: true\n\t\t\t\t};\n\n\t\t\t\tvar stubName = req.path + (req.options.stubType || '') + '.json';\n\t\t\t\tr.url = './stubs/' + (req.stub || (req.network + '/' + req.method + '/' + stubName));\n\t\t\t\toriginalRequest.call(hello.utils, r, callback);\n\t\t\t};\n\n\t\t\treturn requestProxy;\n\t\t},\n\n\t\tsharedSetup: function() {\n\n\t\t\tvar originalGetAuthResponse = hello.getAuthResponse;\n\t\t\tvar originalRequest = hello.utils.request;\n\t\t\tvar requestProxy = this.getRequestProxy(originalRequest);\n\n\t\t\tbefore(function() {\n\t\t\t\thello.getAuthResponse = function(service) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taccess_token: 'token'\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\thello.utils.request = requestProxy;\n\t\t\t});\n\n\t\t\tafter(function() {\n\t\t\t\thello.getAuthResponse = originalGetAuthResponse;\n\t\t\t\thello.utils.request = originalRequest;\n\t\t\t});\n\n\t\t}\n\n\t};\n\n});\n","// Load in the modules to test the endpoints\ndefine([\n\t'./api',\n\t'./apiMe',\n\t'./apiMeAlbum',\n\t'./apiMeAlbums',\n\t'./apiMeFriends',\n\t'./apiMePhotos'\n], function() {\n\t// Done\n});\n","\nvar a = ['localStorage', 'sessionStorage'];\nvar i = -1;\nvar prefix = 'test';\n\nexport const namespace = 'tricks';\n\n// Set LocalStorage\nvar localStorage;\n\nwhile (a[++i]) {\n\ttry {\n\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\tlocalStorage = window[a[i]];\n\t\tlocalStorage.setItem(prefix + i, i);\n\t\tlocalStorage.removeItem(prefix + i);\n\t\tbreak;\n\t}\n\tcatch (e) {\n\t\tlocalStorage = null;\n\t}\n}\n\nif (!localStorage) {\n\n\tvar cache = null;\n\n\tlocalStorage = {\n\t\tgetItem: prop => {\n\t\t\tprop += '=';\n\t\t\tvar m = document.cookie.split(';');\n\t\t\tm.forEach(item => {\n\t\t\t\titem = item.replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\tif (item && item.indexOf(prop) === 0) {\n\t\t\t\t\treturn item.substr(prop.length);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn cache;\n\t\t},\n\n\t\tsetItem: (prop, value) => {\n\t\t\tcache = value;\n\t\t\tdocument.cookie = prop + '=' + value;\n\t\t}\n\t};\n\n\t// Fill the cache up\n\tcache = localStorage.getItem(namespace);\n}\n\nfunction get() {\n\tvar json = {};\n\ttry {\n\t\tjson = JSON.parse(localStorage.getItem(namespace)) || {};\n\t}\n\tcatch (e) {}\n\n\treturn json;\n}\n\nfunction set(json) {\n\tlocalStorage.setItem(namespace, JSON.stringify(json));\n}\n\n\nmodule.exports = (name, value) => {\n\t// Local storage\n\tvar json = get();\n\n\tif (name && value === undefined) {\n\t\treturn json[name] || null;\n\t}\n\telse if (name && value === null) {\n\t\ttry {\n\t\t\tdelete json[name];\n\t\t}\n\t\tcatch (e) {\n\t\t\tjson[name] = null;\n\t\t}\n\t}\n\telse if (name) {\n\t\tjson[name] = value;\n\t}\n\telse {\n\t\treturn json;\n\t}\n\n\tset(json);\n\n\treturn json || null;\n};\n","let instanceOf = require('./instanceOf.js');\n\nmodule.exports = function extend(r, ...args) {\n\targs.forEach(o => {\n\t\tif (instanceOf(r, Object) && instanceOf(o, Object) && r !== o) {\n\t\t\tfor (let x in o) {\n\t\t\t\tr[x] = extend(r[x], o[x]);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr = o;\n\t\t}\n\t});\n\treturn r;\n}\n","module.exports = (test, root) => {\n\treturn root && test instanceof root;\n};\n"]}